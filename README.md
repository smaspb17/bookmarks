# Bookmarks
### ОПИСАНИЕ:
**Bookmarks** - это учебный Pet-проект, социальный веб-сайт добавления и 
просмотра изображений, подписок и лайков, созданный в рамках изучения чистого 
Django. 
В проекте реализован следующий функционал:
* приложения: пользователи (account), действия на сайте (actions),
  изображения (images) - созданы модели, формы, представления, пути, шаблоны.
* расширение auth.User моделью Profile (one-to-one).
* аутентификация по email (кастомный бэкэнд).
* система сообщений (django.contrib.messages).
* настроен (локально) защищенный протокол HTTPS (django-extensions) и 
  доменное имя bookmarks.ru.
* социальная аутентификация через сторонние сервисы (OAuth2.0) - Google, VK,
  Twitter, GitHub, а также кастомный pipeline.
* система подписки на пользователей и лайков изображений.
* добавление и хранение изображений (Pillow).
* подключен готовый JavaScript-букмарклет для добавления изображений
  со сторонних сайтов и интеграция бесконечной прокрутки списка изображений
  с использованием AJAX-запросов через Fetch API.
* модуль учета (actions) действий пользователей на сайте (регистрация, 
  добавление изображения, подписка, лайк).
* применен сигнал и функция-приемник по подсчету количества лайков для 
  поля модели Image.
* использована резидентная база данных Redis для подсчета количества
  просмотров изображений и системы их рейтинга.
* Django debug toolbar.

### СТЕК ТЕХНОЛОГИЙ:

Python 3.12, Django 4.2.13, Redis 5.0

### ЛОКАЛЬНАЯ УСТАНОВКА (для Windows):

1. Клонируй проект и перейди в него:
```shell
git clone git@github.com:smaspb17/bookmarks.git
cd bookmarks
```
2. Создай виртуальное окружение для проекта. Это позволит изолировать 
   проект от системных зависимостей и установленных библиотек. 
```shell
python -m venv venv
```
3. Активируй виртуальное окружение командой:
```shell
venv/Scripts/activate
```
4. Установи зависимости:
```shell
pip install -r requirements.txt
```
5. При необходимости обнови пакетный менеджер pip:
```shell
python -m pip install --upgrade pip
```
6. Создай файл .env (в контейнере проекта `bookmarks/`) и заполни его 
   переменными, указанными в файле example.env. Для системы социальной
   аутентификации по протоколу OAuth2.0 создай необходимые приложения
   в сервисах GitHub, VK, Twitter, Google и скопируй ключи.
7. Перейди в пакет проекта (`bookmarks/bookmarks/`, где находится файл
   manage.py) и выполни миграции:
```shell
cd bookmarks/
python manage.py makemigrations
python manage.py migrate
```
8. Создай суперпользователя:
```shell
python manage.py createsuperuser
```
#### Локальная установка доменного имени и протокола HTTPS
Необходимы для использования социальной аутентификации по протоколу OAuth2.0.

9.1. Найди файл hosts твоей машины. Если используешь Linux/macOS,
      то файл hosts находится в `/etc/hosts`. Если же у тебя Windows, то
      `C:\Windows\System32\Drivers\etc\hosts`. 
      Отредактируй файл hosts, добавив следующую ниже строку:
```
127.0.0.1 bookmarks.ru
```
9.2. Добавь в settings.py следующий код:
```
ALLOWED_HOSTS = ['127.0.0.1', 'localhost', 'bookmarks.ru']
INSTALLED_APPS = [
# ...
'django_extensions',
]
```
9.3. Убедись в установке библиотек, а при отсутствии установи их:
```
pip install django-extensions
pip install werkzeug
pip install pyOpenSSL
```
10.1. Команда для запуска сервера по url https://bookmarks.ru:8000/ либо 
https://127.0.0.1:8000/. Обрати внимание, что для использования JS скрипта 
букмарклета по копированию изображений со сторонних сайтов, необходимо 
использовать данную команду:
```
python manage.py runserver_plus --cert-file cert.crt
```
10.2. Команда для запуска сервера по url https://bookmarks.ru/. В данном 
адресе нет порта, что является требованием некоторых сервисов 
аутентификации по протоколу OAuth2.0, например VK:
```
python manage.py runserver_plus 443 --cert-file cert.crt
```
Теперь ты можешь использовать проект на своём компьютере. 
Если ты хочешь остановить проект, нажми Ctrl+C в терминале, 
а затем деактивируй виртуальное окружение командой:
```shell
deactivate
```

### АВТОР:
Шайбаков Марат

### ЛИЦЕНЗИЯ:
Apache License 2.0

### КОНТАКТЫ:
smaspb17@yandex.ru
